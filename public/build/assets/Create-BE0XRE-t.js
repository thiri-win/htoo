import{d as g,C as U,k as V,c as w,g as C,o as m,w as k,b as e,i as b,G as a,E as s,u as o,J as u,a as _,F as x,r as S,t as p}from"./app-BjIgr2it.js";import{_ as q}from"./AppLayout.vue_vue_type_script_setup_true_lang-CjQvoKwT.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CYHF7x58.js";import"./useForwardExpose-DpR4Q0E1.js";import"./RovingFocusGroup-DJHD7ICX.js";const D={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2 gap-y-5 bg-neutral-100 dark:bg-stone-900 p-5 rounded-lg"},T={class:"bg-neutral-100 dark:bg-stone-900 my-5 p-5 rounded-lg"},B={class:"w-full"},N=["onUpdate:modelValue"],$=["onUpdate:modelValue"],E=["onUpdate:modelValue"],M=["onClick"],O={colspan:"5",class:"text-nowrap"},A={class:"bg-neutral-100 dark:bg-stone-900 my-5 p-5 rounded-lg"},F={class:"text-right"},L=g({__name:"Create",props:{voucher:Object},setup(h){const l=h,t=U({date:l.voucher.date?new Date(l.voucher.date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],customer_name:l.voucher.customer_name||"",customer_phone:l.voucher.customer_phone||"",car_brand:l.voucher.car_brand||"",car_model:l.voucher.car_model||"",car_number:l.voucher.car_number||"",sales:l.voucher.sales||[{id:1,description:"",quantity:1,unit_price:0,sub_total:0}],discount:l.voucher.discount||0,total:l.voucher.total||0,note:l.voucher.note||null}),v=()=>{t.sales.push({description:t.sales.description,quantity:t.sales.quantity||1,unit_price:t.sales.unit_price||0,sub_total:t.sales.sub_total})},y=d=>{t.sales=t.sales.filter(r=>r.id!=d.id)};V(()=>[t.sales,t.discount],()=>{t.sales.forEach(d=>d.sub_total=(d.quantity||1)*(d.unit_price||0))},{deep:!0,immediate:!0}),t.total=w(()=>t.sales.reduce((d,r)=>d+r.quantity*r.unit_price,0)-t.discount);const f=()=>{l.voucher.car_number?t.put(route("vouchers.update",l.voucher.id)):t.post(route("vouchers.store"))};return(d,r)=>(m(),C(q,null,{default:k(()=>[e("form",{action:"",method:"",onSubmit:b(f,["prevent"])},[e("div",D,[e("div",null,[a(e("input",{type:"date",name:"date",id:"date","onUpdate:modelValue":r[0]||(r[0]=n=>o(t).date=n),class:s(o(t).errors.date?"border-red-300":"")},null,2),[[u,o(t).date]])]),e("div",null,[a(e("input",{type:"text",name:"customer_name",id:"customer_name",placeholder:"Customer Name","onUpdate:modelValue":r[1]||(r[1]=n=>o(t).customer_name=n),class:s(o(t).errors.customer_name?"border-red-300":"")},null,2),[[u,o(t).customer_name]])]),e("div",null,[a(e("input",{type:"tel",name:"customer_phone",id:"customer_phone",placeholder:"Phone","onUpdate:modelValue":r[2]||(r[2]=n=>o(t).customer_phone=n),class:s(o(t).errors.customer_phone?"border-red-300":"")},null,2),[[u,o(t).customer_phone]])]),e("div",null,[a(e("input",{type:"text",name:"car_brand",id:"car_brand",placeholder:"Car Brand","onUpdate:modelValue":r[3]||(r[3]=n=>o(t).car_brand=n),class:s(o(t).errors.car_brand?"border-red-300":"")},null,2),[[u,o(t).car_brand]])]),e("div",null,[a(e("input",{type:"text",name:"car_model",id:"car_model",placeholder:"Car Model","onUpdate:modelValue":r[4]||(r[4]=n=>o(t).car_model=n),class:s(o(t).errors.car_model?"border-red-300":"")},null,2),[[u,o(t).car_model]])]),e("div",null,[a(e("input",{type:"text",name:"car_number",id:"car_number",placeholder:"Car Number","onUpdate:modelValue":r[5]||(r[5]=n=>o(t).car_number=n),class:s(o(t).errors.car_number?"border-red-300":"")},null,2),[[u,o(t).car_number]])])]),e("div",T,[e("table",B,[r[10]||(r[10]=e("thead",null,[e("tr",null,[e("th",null,"No"),e("th",null,"Description"),e("th",null,"Quantity"),e("th",null,"unit_price"),e("th",null,"Sub_Total")])],-1)),e("tbody",null,[(m(!0),_(x,null,S(o(t).sales,(n,c)=>(m(),_("tr",{key:n.id},[e("td",null,p(c+1),1),e("td",null,[a(e("input",{type:"text","onUpdate:modelValue":i=>n.description=i,placeholder:"Description",class:s(["border-white",o(t).errors[`sales.${c}.description`]?"!border-b !border-red-300":""])},null,10,N),[[u,n.description]])]),e("td",null,[a(e("input",{type:"number","onUpdate:modelValue":i=>n.quantity=i,placeholder:"Qty",class:s(["border-white",o(t).errors[`sales.${c}.quantity`]?"!border-b !border-red-300":""])},null,10,$),[[u,n.quantity]])]),e("td",null,[a(e("input",{type:"number","onUpdate:modelValue":i=>n.unit_price=i,placeholder:"Amount",class:s(["border-white",o(t).errors[`sales.${c}.unit_price`]?"!border-b !border-red-300":""])},null,10,E),[[u,n.unit_price]])]),e("td",null,p(n.quantity*n.unit_price),1),e("td",null,[e("a",{href:"#",onClick:b(i=>y(n),["prevent"]),class:"text-nowrap"}," - Remove",8,M)])]))),128)),e("tr",null,[e("td",O,[e("a",{href:"#",onClick:b(v,["prevent"])},"+ Add")])])]),e("tfoot",null,[e("tr",null,[r[8]||(r[8]=e("td",{colspan:"4"},[e("label",{for:"discount"},"Discount")],-1)),e("td",null,[a(e("input",{type:"number",name:"discount",id:"discount","onUpdate:modelValue":r[6]||(r[6]=n=>o(t).discount=n)},null,512),[[u,o(t).discount]])])]),e("tr",null,[r[9]||(r[9]=e("td",{colspan:"4"},[e("label",{for:"total"},"Total")],-1)),e("td",null,p(o(t).total),1)])])])]),e("div",A,[r[11]||(r[11]=e("label",{for:"note"},"Note:",-1)),a(e("textarea",{name:"note",id:"note","onUpdate:modelValue":r[7]||(r[7]=n=>o(t).note=n)},null,512),[[u,o(t).note]])]),e("div",F,[e("button",{type:"submit",class:s(l.voucher.car_number?"edit-btn":"submit-btn")},p(l.voucher.car_number?"Update":"Submit"),3)])],32)]),_:1}))}});export{L as default};
